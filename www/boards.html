<!DOCTYPE HTML>
<html>
<head>
	<title>PinnerSpace - My Boards</title>
	<link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="../bootstrap/css/bootstrap-theme.min.css">
	<script src="../scripts/jquery-1.11.1.min.js" type="text/javascript"></script>
	<script src="../bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="../scripts/shapes.js" type="text/javascript"></script>
	<!--Google Login Script-->
	<script type="text/javascript">
	(function() {
		var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
		po.src = 'https://apis.google.com/js/client:plusone.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
	})();
	</script>
	<!--End of Google Login Script-->
	<script type="text/javascript">
		function init(numboards){
			if(numboards == 0){
				var input = document.getElementById("createboard");
				alert("To start using PinnerSpace, you'll need a board.\nType a Board Name below, and hit 'Create a board'!\nWhen you're done, click 'Home' on the left to view your new board.");
				input.focus();
			}
		}
	</script>
	<style>
	.btntext {
		text-align: left;
	}
	.btn {
		width: 100%;
	}
	</style>
</head>
<body onload="init({{numBoards}})">
	<div id="header">
		<div class="jumbotron">
			<h2 class="title" style="text-align: center">PinnerSpace</h2>
			
			<ul class="nav nav-pills pull-left clearfix">
				<li><a href="./">Home</a></li> <!--stubs-->
				<li><a href="./boards">Boards</a></li>
				<li><a href="./settings">Settings</a></li>
			</ul>
			<ul class="nav nav-pills pull-right"> <!--class="span4 offset8 signin-align"-->
				<li class="disabled"><a>Welcome back <b>{{ user.usernick }}</b>!</a></li>
				<li><a href="/logout">Logout</a></li>
			</ul>
		</div>
	</div>
	
	<!--BODY-->
	<div align="center">
		<form name="input" action="./newBoard" method="post">
			Board Name: <input type="text" name="boardName" id="createboard">
			<input type="submit" value="Create new board">
		</form>
		<p>
		<p>
		<form name="input" action="./boards" method="post">
			Find board of: <input type="text" name="targetMail" placeholder="User ID" value="">
			<input type="submit" value="Submit">
		</form>
		<p><p>
		<table>
			{% if targetMail != user.email and targetMail %}
			<tr>Boards of {{ targetMail }}<tr>
			{% elif targetMail %}
			<tr>My Boards</tr>
			{% endif %}
			{% for board in boards %}
			<tr>
				{% if board.boardUser == user.email %}
				<form name="input" action="./deleteBoard" method="post">
					<td valign="baseline"><button class="btn btn-default glyphicon glyphicon-remove" name="boardID" type="submit" value={{ board.boardID }}></button></td>
				</form>
				<td>
				<form name="input" action="./boardSettings" method="post" width="100%">
					<button class="btn btntext btn-primary btn-sm" name="boardID" type="submit" width="100%" value={{ board.boardID }}>Board{{ board.boardID }}: {{ board.boardName }}</button>
				</form>
				</td>
				{% else %}
				<td class="btntext btn btntext btn-sm btn-primary disabled" valign="baseline">Board{{ board.boardID }}: {{ board.boardName }}</td>
				{% endif %}


				{% if board.boardID == user.defaultBoardID and board.boardUser == user.defaultBoardUser %}
				<td valign="middle">
				<button class="btn disabled badge" name="label">Default</button>
				</td>
				{% elif user.email in board.followers or board.boardUser == user.email %}
					{% if user.email != board.boardUser %}
					<td>
					<form name="input" action="./unfollowBoard" method="post">
						<input type="hidden" name="boardUser" value={{ targetMail }}>
						<button class="btn btn-danger btn-sm" name="boardID" type="submit" value={{ board.boardID }}>Unfollow</button>
					</form>
					</td>
					{% endif %}
				<td>
				<form name="input" action="./changeDefaultBoard" method="post">
					<input type="hidden" name="boardUser" value={{ targetMail }}>
					<button class="btn btn-default btn-sm" name="boardID" type="submit" value={{ board.boardID }}>Set as default</button>
				</form>
				</td>
					
				{% else %}
				<td>
				<form name="input" action="./followBoard" method="post">
					<input type="hidden" name="boardUser" value={{ targetMail }}>
					<button class="btn btn-info btn-sm" name="boardID" type="submit" value={{ board.boardID }}>Follow</button>
				</form>
				</td>
				{% endif %}
			</tr>
			{% endfor %}
		</table>
		<p><p>
		<b>{{ error }}</b>
		<p><p>
	</div>
	<!--END BODY-->
</body>
</html>