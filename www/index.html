<!DOCTYPE HTML>
<html>
<head>
	<title>PinnerSpace Home</title>
	<link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="../bootstrap/css/bootstrap-theme.min.css">
	<script src="../scripts/jquery-1.11.1.min.js" type="text/javascript"></script>
	<script src="../bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="../scripts/fabric.js" type="text/javascript"></script>
	<!--Google Login Script-->
	<script type="text/javascript">
	(function() {
		var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
		po.src = 'https://apis.google.com/js/client:plusone.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
	})();
	</script>
	<!--End of Google Login Script-->
	<script type = "text/javascript">
	var canvas;
	function loadCanvas(board){
		canvas = new fabric.Canvas('canvas');
		canvas.loadFromJSON(board);
	}
	function saveCanvas(){
		return JSON.stringify(canvas);
	}
	</script>
</head>
<body onload="loadCanvas({{boardData}})">
	<div id="header">
		<div class="jumbotron">
			<h2 class="title" style="text-align: center">PinnerSpace</h2>
			
			<ul class="nav nav-pills pull-left clearfix">
				<li><a href="./">Home</a></li>
				<li><a href="./boards">Boards</a></li>
				<li><a href="./settings">Settings</a></li>
			</ul>
			<ul class="nav nav-pills pull-right"> <!--class="span4 offset8 signin-align"-->
				<li class="disabled"><a>Welcome back <b>{{ user_nick }}</b>!</a></li>
				<li><a href="{{ logout }}">Logout</a></li>
			</ul>
		</div>
	</div>
	
	<!--BODY-->
	<div id="boardInfo" align="center">
		Board{{ currBoard.boardID }}
	</div>
	<center>
		<div class="btn-group">
			<button class="disabled btn btn-primary">{{ currBoard.boardName }}</button>
			{% if user.numBoards > 1 %}
			<button data-toggle="dropdown" class="btn btn-primary dropdown-toggle"><span class="caret"></span></button>
			<ul class="dropdown-menu">
				{% for board in boards %}
					{% if board.boardID != currBoard.boardID %}
					<li><a href="./board?boardID={{ board.boardID }} ">{{ board.boardName }}</a></li>
					{% endif %}
				{% endfor %}
			</ul>
			{% endif %}
		</div>

	
	<div id="pinboard" style="width:1000px; height:500px; margin: 0 auto; padding: 5px">
		<!--canvas id must be consistent-->
		<canvas id="canvas" width="1000" height="500" style="border: 1px solid black;">
			This text is displayed if your browser does not support HTML5 Canvas.
		</canvas>
	</div>
	<form class="form-inline navbar-form" name="save" action="./saveBoard" method="post" float="center">
		<button class="btn" name="save" type="submit" value=saveCanvas() float="center"></button>
	</form>
	<!--END BODY-->
</body>
</html>


<!--Old stuff
		var canvas = new fabric.Canvas('canvas');
		canvas.backgroundColor = 'green';
		var rect = new fabric.Rect({
			left: 100,
			top: 100,
			fill: 'black',
			width: 20,
			height: 20
		});

		// "add" rectangle onto canvas
		canvas.add(rect);

		var canvasStr = JSON.stringify(canvas);
		console.log(canvasStr);
-->